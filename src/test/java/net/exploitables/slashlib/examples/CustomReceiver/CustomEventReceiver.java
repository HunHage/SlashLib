package net.exploitables.slashlib.examples.CustomReceiver;

import discord4j.core.event.domain.interaction.ChatInputInteractionEvent;
import net.exploitables.slashlib.EventReceiverImpl;
import net.exploitables.slashlib.context.ChatInputContext;
import reactor.core.publisher.Mono;
import reactor.util.Logger;
import reactor.util.Loggers;

/**
 * An example custom event receiver that simply prints the command called to console before
 * executing the command as SlashLib normally does.
 */
public class CustomEventReceiver extends EventReceiverImpl {
    private static final Logger logger = Loggers.getLogger(CustomEventReceiver.class);

    @Override
    public Mono<ChatInputContext> receiveChatInputInteractionEvent(ChatInputInteractionEvent event) {
        return Mono.just(event)
            .doOnNext(e -> logger.info("Command Called: " + e.getCommandName()))
            .flatMap(super::receiveChatInputInteractionEvent);
    }
}
