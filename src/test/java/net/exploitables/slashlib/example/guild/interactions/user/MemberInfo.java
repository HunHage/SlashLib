package net.exploitables.slashlib.example.guild.interactions.user;

import net.exploitables.slashlib.commands.standard.UserCommand;
import net.exploitables.slashlib.context.UserContext;
import net.exploitables.slashlib.context.UserContextBuilder;
import reactor.core.publisher.Mono;

/**
 * Basic user context command that returns the display name of the target member.
 * This will be the same as the username unless a nickname is set.
 */
public class MemberInfo extends UserCommand {
    public MemberInfo() {
        super("Info - Member");
    }

    @Override
    public Mono<UserContext> executeUser(UserContext context) {
        // We've required the target member be present
        //noinspection OptionalGetWithoutIsPresent,ConstantConditions
        return context.getEvent()
            .reply("Target Member Display Name is `" + context.getTargetMember().get().getDisplayName() + "`")
            .thenReturn(context);
    }

    @Override
    public UserContextBuilder setRequestData(UserContextBuilder builder) {
        return builder.requireTargetMember();
    }
}
