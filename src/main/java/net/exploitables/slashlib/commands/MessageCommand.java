package net.exploitables.slashlib.commands;

import discord4j.core.object.command.ApplicationCommand;
import discord4j.discordjson.json.ApplicationCommandRequest;
import net.exploitables.slashlib.context.MessageInteractionContext;
import net.exploitables.slashlib.context.MessageInteractionContextBuilder;
import reactor.core.publisher.Mono;
import reactor.util.annotation.Nullable;

import java.util.List;

/**
 * An abstract class representing a User context menu command.
 */
public abstract class MessageCommand extends BaseCommand {
    protected MessageCommand(String name) {
        this(name, null);
    }
    protected MessageCommand(String name, @Nullable List<Long> guildIDs) {
        // Discord docs state that the description should be an empty string
        super(name, "", null, ApplicationCommand.Type.MESSAGE, guildIDs);
    }

    public abstract Mono<MessageInteractionContext> executeMessage(MessageInteractionContext context);

    public abstract MessageInteractionContextBuilder setRequestData(MessageInteractionContextBuilder builder);

    /**
     * @return a representative {@link ApplicationCommandRequest} to compare/create this data with Discord
     */
    @Override
    public ApplicationCommandRequest asRequest() {
        return this.buildBaseRequest().build();
    }
}
