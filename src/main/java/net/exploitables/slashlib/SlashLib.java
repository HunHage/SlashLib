package net.exploitables.slashlib;

import net.exploitables.slashlib.context.*;

public class SlashLib
        extends GenericSlashLib<
        ChatInputContext, ChatInputContextBuilder,
        MessageContext, MessageContextBuilder,
        UserContext, UserContextBuilder
        >{

    protected SlashLib(SlashLibBuilder builder) {
        super(builder);
    }

    static SlashLib create(SlashLibBuilder builder) {
        if (created) {
            throw new IllegalStateException("GenericSlashLib already created!");
        }
        SlashLib slashLib = new SlashLib(builder);
        slashLib.receiver = builder.eventReceiverProducer.apply(slashLib);
        slashLib.commandRegister = CommandRegister.create(
                builder.globalChatCommands,
                builder.globalUserCommands,
                builder.globalMessageCommands,
                builder.guildChatCommands,
                builder.guildUserCommands,
                builder.guildMessageCommands,
                builder.guildCommandStateProvider);
        created = true;
        return slashLib;
    }

    @Override
    public CommandRegister<
            ChatInputContext, ChatInputContextBuilder,
            MessageContext, MessageContextBuilder,
            UserContext, UserContextBuilder
            > getCommandRegister() {
        return super.getCommandRegister();
    }
}
