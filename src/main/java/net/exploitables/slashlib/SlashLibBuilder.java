package net.exploitables.slashlib;

import net.exploitables.slashlib.commands.BaseCommand;
import net.exploitables.slashlib.commands.GroupCommand;
import net.exploitables.slashlib.commands.TopCommand;

import java.util.ArrayList;
import java.util.List;

/**
 * A builder for {@link SlashLib} to customize the components of it.
 */
public class SlashLibBuilder {
    CommandRegister commandRegister;
    CommandStructure commandStructure;
    List<BaseCommand> commands;

    protected SlashLibBuilder() {
        this.commandRegister = null;
        this.commandStructure = null;
        this.commands = new ArrayList<>();
    }

    /**
     * Set the {@link CommandRegister} used to register commands with discord. It should be extended.
     * @param commandRegister the {@link CommandRegister} to use
     * @return this instance
     */
    public SlashLibBuilder setCommandRegister(CommandRegister commandRegister) {
        this.commandRegister = commandRegister;
        return this;
    }

    /**
     * Add a command to be registered when building a new {@link SlashLib}.
     * An assertion is done to verify the command is an instance of {@link TopCommand} or {@link GroupCommand}
     * @param command the command to add to the {@link CommandRegister}
     * @return this instance
     */
    public SlashLibBuilder addCommand(BaseCommand command) {
        assert command instanceof TopCommand || command instanceof GroupCommand;
        commands.add(command);
        return this;
    }

    public SlashLib build() {
        return new SlashLib(this);
    }
}
